# CreoNow 前端设计决策

> **状态**: 已锁定
> **更新日期**: 2026-01-30
> **来源**: 与创始人的产品讨论 + Variant 设计稿

---

## 1. 布局架构

### 1.1 Dashboard
- **采用方案**: Sidebar 布局（左侧导航 + 卡片网格）
- **设计稿**: `05-dashboard-sidebar-full.html`

### 1.2 编辑器
- **采用方案**: Full IDE 布局（Icon Bar + 文件树 + 编辑区 + 右侧面板）
- **设计稿**: `09-editor-full-ide.html`
- **可切换**: 支持禅模式（全屏纯写作）

### 1.3 禅模式
- **触发方式**: F11 键
- **效果**: 全屏纯写作，隐藏所有面板

---

## 2. 面板配置

### 2.1 左侧 Icon Bar (48px)
按顺序排列：
1. 文件树
2. 大纲
3. 角色
4. 媒体
5. 知识图谱
6. 设置（底部）

### 2.2 左侧 Sidebar
- **宽度**: 可拖拽调整 (180px - 400px)
- **默认宽度**: 240px
- **默认展开**: 记住上次使用的面板

### 2.3 右侧面板
- **组成**: AI 面板 + 信息面板
- **切换方式**: 标签切换（共用空间）
- **AI 面板默认**: 展开
- **宽度**: 360px (AI) / 280px (信息)

---

## 3. 主题系统

### 3.1 主题支持
- **深色主题**: 已有设计稿（19个）
- **浅色主题**: 待补充设计稿
- **切换机制**: 跟随系统自动切换

### 3.2 Design Tokens（深色主题）
```css
--color-bg-body: #080808;
--color-bg-surface: #0f0f0f;
--color-bg-hover: #1a1a1a;
--color-text-primary: #ffffff;
--color-text-secondary: #888888;
--color-text-tertiary: #444444;
--color-border-default: #222222;
```

---

## 4. 快捷键规范

| 功能 | Mac | Windows | 说明 |
|------|-----|---------|------|
| AI 面板 | Cmd+L | Ctrl+L | 打开/关闭 AI 面板 |
| 命令面板 | Cmd+P | Ctrl+P | 快速搜索文件和命令 |
| 禅模式 | F11 | F11 | 全屏专注写作 |
| 当前搜索 | Cmd+F | Ctrl+F | 当前文档搜索 |
| 全局搜索 | Cmd+Shift+F | Ctrl+Shift+F | 全项目搜索 |
| 保存 | Cmd+S | Ctrl+S | 手动保存（自动保存已启用） |
| 新建文件 | Cmd+N | Ctrl+N | 在文件树创建新文件 |

---

## 5. 交互规范

### 5.1 动画
- **级别**: 微妙（subtle）
- **时长**: 200ms
- **曲线**: cubic-bezier(0.2, 0.0, 0.2, 1)
- **效果**: 轻微淡入淡出和滑动

### 5.2 工具栏
- **顶部工具栏**: 固定显示基础格式按钮
- **浮动工具栏**: 选中文字时出现在附近

### 5.3 AI 交互
- **选中文字**: 出现浮动按钮，可直接发送给 AI
- **快捷键**: Cmd+L 打开面板

### 5.4 字数统计
- **位置 1**: 底部状态栏（始终可见）
- **位置 2**: 右侧信息面板

### 5.5 保存
- **自动保存**: 暂停输入后自动保存
- **状态显示**: 显示保存状态（已保存/保存中）

---

## 6. 状态显示

### 6.1 空项目
- **显示**: 模板选择对话框
- **模板类型**: 小说、剧本、笔记

### 6.2 加载中
- **显示**: 顶部细线进度条
- **位置**: 窗口最顶部

### 6.3 错误
- **显示**: 弹出对话框
- **内容**: 错误说明 + 操作建议

---

## 7. 文件系统

### 7.1 新建文件
- **方式**: 直接在文件树创建，然后命名
- **不需要**: 弹出对话框选择类型

### 7.2 文件类型
1. **章节/场景** - 小说的主体内容
2. **角色卡片** - 角色详细信息
3. **笔记** - 随手记录
4. **世界观** - 设定/地点/物品
5. **大纲文档** - 整体结构规划
6. **资料** - 参考材料收集

### 7.3 版本历史
- **自动快照**: 系统自动创建
- **手动标记**: 用户可标记重要版本
- **差异对比**: 支持红色删除/绿色新增显示

### 7.4 导出格式
- Word (.docx)
- PDF
- Markdown (.md)
- 纯文本 (.txt)
- 电子书 (.epub)

---

## 8. 功能深度

### 8.1 AI 面板
- **级别**: 完整功能
- **包含**:
  - 多轮对话
  - 一键应用到编辑器
  - 技能选择器
  - 上下文管理

### 8.2 知识图谱
- **级别**: 完整功能
- **包含**:
  - 自定义节点类型
  - 自由编辑关系
  - 可视化网络
  - 筛选和缩放

### 8.3 角色管理
- **级别**: 完整功能
- **包含**:
  - 详细角色卡片
  - 出场统计
  - 关系图
  - 时间线

---

## 9. 设计稿清单

### 已有设计稿（深色主题，19个）

| 编号 | 文件名 | 用途 | 状态 |
|------|--------|------|------|
| 01 | 01-login.html | 登录页 | ✅ 采用 |
| 02 | 02-onboarding.html | 引导页 | ✅ 采用 |
| 03 | 03-dashboard-bento-cards.html | Dashboard 大卡片 | ⏸ 备选 |
| 04 | 04-dashboard-list-progress.html | Dashboard 列表 | ⏸ 备选 |
| 05 | 05-dashboard-sidebar-full.html | Dashboard 侧边栏 | ✅ 采用 |
| 06 | 06-dashboard-sidebar-dark.html | Dashboard 深色 | ⏸ 备选 |
| 07 | 07-editor-simple.html | 编辑器简洁版 | ⏸ 禅模式参考 |
| 08 | 08-editor-workspace.html | 编辑器工作区 | ⏸ 备选 |
| 09 | 09-editor-full-ide.html | 编辑器完整版 | ✅ 采用 |
| 10 | 10-settings.html | 设置页 | ✅ 采用 |
| 11 | 11-analytics.html | 数据分析 | ✅ 采用 |
| 12 | 12-sidebar-filetree.html | 文件树 | ✅ 采用 |
| 13 | 13-sidebar-outline.html | 大纲视图 | ✅ 采用 |
| 14 | 14-ai-panel.html | AI 面板 | ✅ 采用 |
| 15 | 15-info-panel.html | 信息面板 | ✅ 采用 |
| 16 | 16-create-project-dialog.html | 创建项目 | ✅ 采用 |
| 17 | 17-command-palette.html | 命令面板 | ✅ 采用 |
| 18 | 18-character-manager.html | 角色管理 | ✅ 采用 |
| 19 | 19-knowledge-graph.html | 知识图谱 | ✅ 采用 |

### 待补充设计稿

#### 浅色主题（P0）
- 所有现有设计稿的浅色版本

#### 缺失状态（P1）
- 禅模式/专注模式界面
- 空状态（空项目、空文件树）
- 加载状态（顶部进度条）
- 错误对话框
- 模板选择对话框
- 版本对比视图
- 导出对话框

#### 缺失交互（P2）
- 选中文字浮动工具栏
- 选中文字 AI 按钮
- 拖拽调整侧边栏宽度指示器

---

## 10. 技术栈锁定

| 类别 | 选型 | 版本 |
|------|------|------|
| 框架 | React | 18.x |
| 语言 | TypeScript | 5.x |
| 构建 | Vite | 6.x |
| 样式 | Tailwind CSS + CSS Variables | 4.x |
| 组件原语 | Radix UI | latest |
| 富文本编辑器 | TipTap | 2.x |
| 路由 | React Router | 6.x |
| 状态管理 | Zustand | 4.x |
| Electron | electron-vite | latest |
